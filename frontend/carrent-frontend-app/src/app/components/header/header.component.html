<header>
  <!-- Logo -->
  <figure class="logo">
    <img src="assets/Logo.svg" alt="Page Logo" class="logo" />
  </figure>

  <!-- Centered nav for tablet/desktop -->
  <div class="center-nav">
    <nav class="nav-bar">
      <ul>
        <li>
          <a 
            routerLink="/" 
            [ngClass]="{ 'active-tab': selectedTab === 'home' }"
            (click)="setActiveTab('home')"
          >Home</a>
        </li>
        <li>
          <a 
            href="#" 
            [ngClass]="{ 'active-tab': selectedTab === 'cars' }"
            (click)="setActiveTab('cars')"
          >Cars</a>
        </li>
        <li *ngIf="user">
          <a 
            routerLink="/my-bookings" 
            [ngClass]="{ 'active-tab': selectedTab === 'bookings' }"
            (click)="setActiveTab('bookings')"
          >My Bookings</a>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Hamburger button (visible only on mobile) -->
  <button class="hamburger" (click)="toggleMenu()" aria-label="Toggle menu">
    {{ menuOpen ? '✕' : '☰' }}
  </button>

  <!-- Mobile dropdown -->
  <div class="mobile-menu" [class.active]="menuOpen">
    <nav class="nav-bar">
      <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Cars</a></li>
        <li *ngIf="user"><a href="#">My Bookings</a></li>
      </ul>
    </nav>
    <div class="login-side" *ngIf="user; else mobileGuest">
      <div class="user-dropdown">
        <span (click)="toggleDropdown()" class="user-name">
         {{ user.firstName }} ▼
        </span>
        <ul [class.expanded]="dropdownOpen" class="dropdown-menu-mobile">
          <li (click)="goToProfile()">Profile</li>
          <li (click)="logout()">Logout</li>
        </ul>        
      </div>
      <select>
        <option value="en" selected>En</option>
        <option value="fr">Fr</option>
        <option value="es">Es</option>
      </select>
    </div>
    <ng-template #mobileGuest>
      <app-user-role></app-user-role>
      <select aria-label="Language selection" >
        <option value="en" selected>En</option>
        <option value="fr">Fr</option>
        <option value="es">Es</option>
      </select>
    </ng-template>
  </div>

 <!-- Desktop login: only visible on screens wider than 640px -->
<div class="desktop-only">
  <ng-container *ngIf="user; else desktopGuestLinks">
    <div class="login-side">
      <div class="user-dropdown" style="display: contents; justify-content: center;">
        <img src="assets/profile-icon.svg" alt="Profile" class="profile-icon" />
        <span (click)="toggleDropdown()" class="user-name">
          Hello, {{ user.firstName }} ({{ user.role }})
        </span>
        <ul *ngIf="dropdownOpen" class="dropdown-menu">
          <li (click)="goToProfile()">Profile</li>
          <li (click)="logout()">Logout</li>
        </ul>
      </div>
      <select aria-label="Language selection">
        <option value="en" selected>En</option>
        <option value="fr">Fr</option>
        <option value="es">Es</option>
      </select>
    </div>
  </ng-container>

  <ng-template #desktopGuestLinks>
    <div class="login-side">
      <app-user-role></app-user-role>
      <select aria-label="Language selection">
        <option value="en" selected>En</option>
        <option value="fr">Fr</option>
        <option value="es">Es</option>
      </select>
    </div>
  </ng-template>
</div>
